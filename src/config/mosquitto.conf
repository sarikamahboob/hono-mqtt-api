# Basic Settings
listener 1883 0.0.0.0
protocol mqtt

listener 9001 0.0.0.0
protocol websockets

# Disable anonymous access
allow_anonymous false

# Auth Plugin
auth_plugin /mosquitto/go-auth.so

# Backend Configuration
auth_opt_backends mongo

# MongoDB Connection (no auth for development)
auth_opt_mongo_host mongodb
auth_opt_mongo_port 27017
auth_opt_mongo_dbname mqtt_auth

# Collections
auth_opt_mongo_users_collection users
auth_opt_mongo_acls_collection acls

# Password Hashing - BCrypt
auth_opt_hasher bcrypt
auth_opt_hasher_cost 10

# Logging
auth_opt_log_level debug
auth_opt_log_dest stdout

# Cache
auth_opt_cache true
auth_opt_cache_reset true
auth_opt_cache_refresh true
auth_opt_auth_cache_seconds 30
auth_opt_acl_cache_seconds 30